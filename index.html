<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>Crooked Billet Collection</title>
    <style>
        /* Global reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        /* Body styling */
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 25%, #ffd23f 50%, #06ffa5 75%, #1cb5e0 100%);
            min-height: 100vh;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }
        /* Main menu styles */
        .main-menu {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80vh;
            width: 100%;
            max-width: 600px;
            text-align: center;
        }
        .logo-container {
            margin-bottom: 2rem;
            animation: fadeInUp 0.8s ease-out;
        }
        .logo-container img {
            max-width: 300px;
            width: 100%;
            height: auto;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
        }
        .main-title {
            color: #ffffff;
            font-size: clamp(2.5rem, 8vw, 4rem);
            font-weight: 1000;
            margin-bottom: 2rem;
            text-shadow: 3px 3px 12px rgba(0,0,0,0.4);
            letter-spacing: -0.02em;
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }
        .main-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: clamp(1rem, 3vw, 1.3rem);
            margin-bottom: 3rem;
            font-weight: 600;
            animation: fadeInUp 0.8s ease-out 0.4s both;
        }
        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            width: 100%;
            max-width: 400px;
        }
        .menu-btn {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            backdrop-filter: blur(10px);
            color: #ffffff;
            border: 3px solid #ffd23f;
            padding: 1.2rem 2rem;
            border-radius: 15px;
            cursor: pointer;
            font-size: clamp(1.1rem, 3vw, 1.3rem);
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        .menu-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            background: linear-gradient(135deg, #06ffa5 0%, #1cb5e0 100%);
            border-color: #ffd23f;
        }
        .menu-btn:active {
            transform: translateY(-1px);
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        /* Instructions styles */
        .instructions-section {
            width: 100%;
            display: flex;
            align-items: center;
            flex-direction: column;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            text-align: center;
        }
        .instructions-container {
            width: 100%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            padding: 40px;
            margin: 20px 0;
            border: 3px solid #06ffa5;
        }
        .instructions-title {
            color: #ff6b35;
            font-size: clamp(2rem, 6vw, 3rem);
            font-weight: 800;
            margin-bottom: 30px;
            text-align: center;
            letter-spacing: -0.02em;
        }
        .instructions-content {
            color: #333;
            font-size: clamp(1.1rem, 2.5vw, 1.3rem);
            line-height: 1.6;
            margin-bottom: 40px;
            text-align: left;
        }
        .instructions-content h3 {
            color: #1cb5e0;
            font-size: clamp(1.3rem, 3vw, 1.5rem);
            font-weight: 700;
            margin-bottom: 15px;
            margin-top: 25px;
        }
        .instructions-content ul {
            margin: 15px 0;
            padding-left: 25px;
        }
        .instructions-content li {
            margin-bottom: 8px;
        }
        .instructions-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .instructions-btn {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: #ffffff;
            border: 3px solid #ffd23f;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            min-width: 150px;
            box-shadow: 0 8px 25px rgba(255,107,53,0.4);
        }
        .instructions-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(255,107,53,0.6);
            background: linear-gradient(135deg, #06ffa5 0%, #1cb5e0 100%);
            border-color: #ffd23f;
        }
        .instructions-btn.secondary {
            background: linear-gradient(135deg, #1cb5e0 0%, #06ffa5 100%);
            border: 3px solid #ffd23f;
            color: #ffffff;
            box-shadow: 0 8px 25px rgba(28,181,224,0.4);
        }
        .instructions-btn.secondary:hover {
            background: linear-gradient(135deg, #f7931e 0%, #ff6b35 100%);
            border-color: #ffd23f;
            box-shadow: 0 15px 35px rgba(28,181,224,0.6);
        }
        /* Slideshow styles */
        .slideshow-section {
            width: 100%;
            display: flex;
            align-items: center;
            flex-direction: column;
            justify-content: center;
            min-height: 100vh;
            padding: 20px 0;
        }
        .slideshow-title {
            color: #ffffff;
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
            width: 100%;
            max-width: 800px;
            letter-spacing: -0.02em;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        .slideshow-title:hover {
            transform: scale(1.02);
            text-shadow: 3px 3px 12px rgba(255,210,63,0.8);
        }
        .slideshow-container {
            width: 100%;
            max-width: 900px;
            position: relative;
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            border: 3px solid #06ffa5;
            overflow: hidden;
            backdrop-filter: blur(10px);
            height: min(85vh, 700px);
            display: flex;
            flex-direction: column;
        }
        .slides-wrapper {
            position: relative;
            overflow: hidden;
            touch-action: pan-x;
            user-select: none;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .slides-container {
            display: flex;
            width: 100%;
            height: 100%;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .slide {
            position: relative;
            text-align: center;
            padding: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            width: 100%;
            flex-shrink: 0;
            height: 100%;
            box-sizing: border-box;
        }
        .slide-image-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            overflow: hidden;
            min-height: 0;
        }
        .slide img {
            max-width: 95%;
            max-height: 95%;
            width: auto;
            height: auto;
            object-fit: contain;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 3px solid #06ffa5;
        }

        /* FIXED: slide-bottom-section now uses position: relative to anchor absolute clue */
        .slide-bottom-section {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            width: 100%;
            flex-shrink: 0;
            min-height: 40px; /* prevents layout shift */
        }

        /* FIXED: clue-btn is now absolutely positioned to the left of answer-btn */
        .clue-btn {
            position: absolute;
            left: calc(-100% + 12px); /* sits 12px left of answer button */
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ffd23f 0%, #f7931e 100%);
            border: 2px solid #06ffa5;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255,210,63,0.4);
            flex-shrink: 0;
            z-index: 2;
        }
        .clue-btn:hover {
            transform: translateY(-50%) scale(1.1);
            background: linear-gradient(135deg, #06ffa5 0%, #1cb5e0 100%);
            border-color: #ffd23f;
            box-shadow: 0 6px 20px rgba(255,210,63,0.6);
        }
        .clue-btn svg {
            width: 20px;
            height: 20px;
            fill: #333;
        }

        .answer-btn {
            height: 40px;
            padding: 0 16px;
            background: linear-gradient(135deg, #1cb5e0 0%, #06ffa5 100%);
            color: #ffffff;
            border: 3px solid #ffd23f;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 4px 15px rgba(28,181,224,0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-width: 120px;
            flex-shrink: 0;
        }
        .answer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(28,181,224,0.6);
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            border-color: #ffd23f;
        }
        .answer-btn svg {
            width: 16px;
            height: 16px;
            fill: #ffffff;
        }

        /* Modal styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
            padding: 20px;
        }
        .modal-content {
            background: #ffffff;
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            border: 3px solid #06ffa5;
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
            max-height: 80vh;
            overflow-y: auto;
        }
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(50px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #ff6b35;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .modal-title svg {
            width: 24px;
            height: 24px;
        }
        .modal-title.clue-title svg {
            fill: #ffd23f;
        }
        .modal-title.answer-title svg {
            fill: #1cb5e0;
        }
        .modal-text {
            font-size: 1.1rem;
            color: #333;
            line-height: 1.6;
            margin-bottom: 25px;
        }
        .modal-text.answer-text {
            font-weight: 600;
            color: #ff6b35;
            font-size: 1.2rem;
        }
        .modal-info {
            font-size: 1rem;
            color: #666;
            line-height: 1.5;
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid rgba(6,255,165,0.3);
            font-style: italic;
        }
        .modal-close {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: #ffffff;
            border: 3px solid #ffd23f;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255,107,53,0.4);
            margin-top: 10px;
        }
        .modal-close:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255,107,53,0.6);
            background: linear-gradient(135deg, #1cb5e0 0%, #06ffa5 100%);
        }

        /* Navigation styles */
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            gap: 15px;
            flex-shrink: 0;
            border-top: 3px solid #ffd23f;
        }
        .nav-btn {
            background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
            color: #333;
            border: 3px solid #06ffa5;
            padding: 14px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 100px;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(6,255,165,0.4);
        }
        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(6,255,165,0.6);
            background: linear-gradient(135deg, #ffd23f 0%, #f7931e 100%);
            border-color: #06ffa5;
            color: #333;
        }
        .nav-btn:disabled {
            background: #ccc;
            color: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            border-color: #999;
        }
        .slide-counter {
            font-weight: 600;
            color: #ffffff;
            font-size: 16px;
            white-space: nowrap;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid #ffd23f;
        }

        /* Dot navigation */
        .dots-container {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #1cb5e0 0%, #06ffa5 100%);
            overflow-x: auto;
            white-space: nowrap;
            flex-shrink: 0;
            border-top: 2px solid #ffd23f;
        }
        .dot {
            height: 10px;
            width: 10px;
            margin: 0 4px;
            background-color: rgba(255,255,255,0.5);
            border-radius: 50%;
            display: inline-block;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            border: 2px solid #ffd23f;
        }
        .dot:hover, .dot.active {
            background-color: #ffd23f;
            transform: scale(1.4);
            border-color: #ff6b35;
        }

        /* Swipe indicator */
        .swipe-indicator {
            position: absolute;
            bottom: 150px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            animation: fadeInOut 3s infinite;
            pointer-events: none;
            z-index: 10;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        /* Utility classes */
        .hidden {
            display: none !important;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .slideshow-container {
                height: 90vh;
            }
            .slide {
                padding: 12px;
            }
            .nav-btn {
                padding: 12px 16px;
                font-size: 14px;
                min-width: 80px;
            }
        }
    </style>
</head>
<body>
    <!-- Main menu -->
    <div class="main-menu" id="main-menu">
        <div class="logo-container">
            <img src="https://philipestevenson-rumham.github.io/CrookedBillet/RumHam.png" alt="RumHam" />
        </div>
        <h1 class="main-title">Crooked Billet Quiz</h1>
        <p class="main-subtitle">Pick A Table Top</p>
        <div class="menu-buttons">
            <button class="menu-btn" onclick="showInstructions('set1')">Set1</button>
            <button class="menu-btn" onclick="showInstructions('set2')">Set2</button>
            <button class="menu-btn" onclick="downloadPDF()">Download PDF</button>
        </div>
    </div>
    <!-- Instructions Set 1 -->
    <div class="instructions-section hidden" id="instructions-set1">
        <div class="instructions-container">
            <h2 class="instructions-title">Set 1</h2>
            <div class="instructions-content">
                <h3>How to Play:</h3>
                <ul>
                    <li>Instruction1</li>
                </ul>
            </div>
            <div class="instructions-buttons">
                <button class="instructions-btn" onclick="startSlideshow('set1')">Start Slideshow</button>
                <button class="instructions-btn secondary" onclick="showMainMenu()">Back to Menu</button>
            </div>
        </div>
    </div>
    <!-- Slideshow Set 1 -->
    <div class="slideshow-section hidden" id="slideshow-set1">
        <h1 class="slideshow-title" onclick="showMainMenu()">Set1</h1>
        <div class="swipe-indicator" id="swipeIndicator1">← Swipe to navigate →</div>
        <div class="slideshow-container">
            <div class="slides-wrapper" id="slides-wrapper1">
                <div class="slides-container" id="slides-container1"></div>
            </div>
            <div class="navigation">
                <button class="nav-btn" onclick="changeSlide(-1)" id="prevBtn1">◀ Prev</button>
                <div class="slide-counter">
                    <span id="current-slide1">1</span> / <span id="total-slides1">25</span>
                </div>
                <button class="nav-btn" onclick="changeSlide(1)" id="nextBtn1">Next ▶</button>
            </div>
            <div class="dots-container" id="dots-container1"></div>
        </div>
    </div>
    <!-- Instructions Set 2 -->
    <div class="instructions-section hidden" id="instructions-set2">
        <div class="instructions-container">
            <h2 class="instructions-title">Set2</h2>
            <div class="instructions-content">
                <h3>How to Play:</h3>
                <ul>
                    <li>Instruction2</li>
                </ul>
            </div>
            <div class="instructions-buttons">
                <button class="instructions-btn" onclick="startSlideshow('set2')">Start Slideshow</button>
                <button class="instructions-btn secondary" onclick="showMainMenu()">Back to Menu</button>
            </div>
        </div>
    </div>
    <!-- Slideshow Set 2 -->
    <div class="slideshow-section hidden" id="slideshow-set2">
        <h1 class="slideshow-title" onclick="showMainMenu()">Set2</h1>
        <div class="swipe-indicator" id="swipeIndicator2">← Swipe to navigate →</div>
        <div class="slideshow-container">
            <div class="slides-wrapper" id="slides-wrapper2">
                <div class="slides-container" id="slides-container2"></div>
            </div>
            <div class="navigation">
                <button class="nav-btn" onclick="changeSlide(-1)" id="prevBtn2">◀ Prev</button>
                <div class="slide-counter">
                    <span id="current-slide2">1</span> / <span id="total-slides2">10</span>
                </div>
                <button class="nav-btn" onclick="changeSlide(1)" id="nextBtn2">Next ▶</button>
            </div>
            <div class="dots-container" id="dots-container2"></div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal" id="modal" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3 class="modal-title" id="modal-title"></h3>
            <div class="modal-text" id="modal-text"></div>
            <div class="modal-info" id="modal-info"></div>
            <button class="modal-close" onclick="closeModal()">Got it!</button>
        </div>
    </div>
    <script>
        
        
        
        const CONFIG = {
            revealDateTime: '2026-02-04 23:30:00',
            githubBaseUrl: 'https://philipestevenson-rumham.github.io/CrookedBillet/',
            pdfFileName: 'CrookedBillet.pdf',
            instructions: {
                set1: {
                    title: "Film Dingbats",
                    content: {
                        howToPlay: [                            
                            "Crack the picture clue to reveal the film.",
                            //'Click the Lightbulb icon for a clue if you need help',//
                            'Click the "Show Answer" button to reveal the answer',
                            'Use the navigation buttons or swipe to move between images',
                            'Click the Title to return to the Main Menu'
                        ]
                    }
                },
                set2: {
                    title: "Name the Celebrity",
                    content: {
                        howToPlay: [
                            'Try to identify the Celebrity from the images.',
                            'Click the Lightbulb icon for a clue if you need help',
                            'Click the "Show Answer" button to reveal the answer',
                            'Use the navigation buttons or swipe to move between images',
                            'Click the Title to return to the Main Menu'
                        ]
                    }
                }
            },
            collections: {
                set1: {
                    title: "Film Dingbats",
                    buttonText: "Film Dingbats",
                    pictures: [
{ filename: "R01.Q01.png", description: "Trainspotting" },
{ filename: "R01.Q02.png", description: "Blazing Saddles" },
{ filename: "R01.Q03.png", description: "Ghostbusters" },
{ filename: "R01.Q04.png", description: "The Devil Wears Prada" },
{ filename: "R01.Q05.png", description: "Purple Rain" },
{ filename: "R01.Q06.png", description: "Black Panther" },
{ filename: "R01.Q07.png", description: "War Horse" },
{ filename: "R01.Q08.png", description: "The Lion King" },
{ filename: "R01.Q09.png", description: "Fargo" },
{ filename: "R01.Q10.png", description: "Blade Runner" },
{ filename: "R01.Q11.png", description: "The Kings Speach" },
{ filename: "R01.Q12.png", description: "Superman Returns" },
{ filename: "R01.Q13.png", description: "The Great Escape" },
{ filename: "R01.Q14.png", description: "American Graffitti" },
{ filename: "R01.Q15.png", description: "Raising Arizona" },
{ filename: "R01.Q16.png", description: "The Empire Strikes Back" },
{ filename: "R01.Q17.png", description: "Smokey and the Bandit" },
{ filename: "R01.Q18.png", description: "Wall-E" },
{ filename: "R01.Q19.png", description: "St Elmos Fire" },
{ filename: "R01.Q20.png", description: "Who Framed Rodger Rabbit" },
{ filename: "R01.Q21.png", description: "Pulp Fiction" },
{ filename: "R01.Q22.png", description: "The Breakfast Club" },
{ filename: "R01.Q23.png", description: "Scarface" },
{ filename: "R01.Q24.png", description: "The Mask of Zoro" },
{ filename: "R01.Q25.png", description: "Seabiscuit" }

                  
                    ]
                },
                set2: {
                    title: "Name the Celebrity",
                    buttonText: "Name the Celebrity",
                    pictures: [
{ filename: "R02.Q01.png", description: "Anita Rani" },
{ filename: "R02.Q02.png", description: "Ardal O’Hanlon" },
{ filename: "R02.Q03.png", description: "Claudia Winkleman" },
{ filename: "R02.Q04.png", description: "Charlie Hunnam" },
{ filename: "R02.Q05.png", description: "Daisy Ridley" },
{ filename: "R02.Q06.png", description: "Damon Albarn" },
{ filename: "R02.Q07.png", description: "Emilia Clarke" },
{ filename: "R02.Q08.png", description: "Eddie Hall" },
{ filename: "R02.Q09.png", description: "Imelda Staunton" },
{ filename: "R02.Q10.png", description: "Iain Glen" },
{ filename: "R02.Q11.png", description: "Ian Watkins" },
{ filename: "R02.Q12.png", description: "Ian McDonald" },
{ filename: "R02.Q13.png", description: "Lisa Snowdon" },
{ filename: "R02.Q14.png", description: "Nick Frost" },
{ filename: "R02.Q15.png", description: "Neil Tennant" },
{ filename: "R02.Q16.png", description: "Noel Fielding" },
{ filename: "R02.Q17.png", description: "Omid Djalili" },
{ filename: "R02.Q18.png", description: "Ozzy Osbourne" },
{ filename: "R02.Q19.png", description: "Omar Sharif" },
{ filename: "R02.Q20.png", description: "Ollie Watkins" },
{ filename: "R02.Q21.png", description: "Paloma Faith" },
{ filename: "R02.Q22.png", description: "Paddy Considine" },
{ filename: "R02.Q23.png", description: "Rose Ayling Ellis" },
{ filename: "R02.Q24.png", description: "Rebecca Adlington" },
{ filename: "R02.Q25.png", description: "Tamsin Greig" }

                    ]
                }
            }
        };
        // Global variables
        let currentSlide = 1;
        let activeSet = null;
        let isRevealed = false;
        let touchStartX = 0;
        let touchEndX = 0;
        let isSwiping = false;
        let isDragging = false;
        // Navigation functions
        function showMainMenu() {
            document.querySelectorAll('.slideshow-section, .instructions-section').forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById('main-menu').classList.remove('hidden');
            activeSet = null;
            currentSlide = 1;
        }
        function showInstructions(setId) {
            document.getElementById('main-menu').classList.add('hidden');
            document.querySelectorAll('.slideshow-section, .instructions-section').forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById(`instructions-${setId}`).classList.remove('hidden');
            activeSet = setId;
        }
        function startSlideshow(setId) {
            document.querySelectorAll('.slideshow-section, .instructions-section').forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById(`slideshow-${setId}`).classList.remove('hidden');
            activeSet = setId;
            const setNumber = setId === 'set1' ? '1' : '2';
            const slidesContainer = document.getElementById(`slides-container${setNumber}`);
            if (!slidesContainer.children.length) {
                createSlides(setId);
            }
            showSlide(1);
            hideSwipeIndicator(setId);
        }
        function downloadPDF() {
            const pdfUrl = CONFIG.githubBaseUrl + CONFIG.pdfFileName;
            const link = document.createElement('a');
            link.href = pdfUrl;
            link.download = CONFIG.pdfFileName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        // Modal functions
        function showClue(slideIndex) {
            if (!activeSet) return;
            const pictures = CONFIG.collections[activeSet].pictures;
            const picture = pictures[slideIndex];
            if (picture && picture.clue) {
                showModal('clue', 'Clue', picture.clue);
            }
        }
        function showAnswer(slideIndex) {
            if (!activeSet) return;
            const pictures = CONFIG.collections[activeSet].pictures;
            const picture = pictures[slideIndex];
            if (!picture) return;
            checkRevealDate();
            if (isRevealed) {
                showModal('answer', 'Answer', picture.description, picture.info);
            } else {
                const revealDate = new Date(CONFIG.revealDateTime);
                const formattedDate = revealDate.toLocaleString();
                showModal('answer', 'Answer Not Yet Available', `Answers will be revealed on ${formattedDate}`);
            }
        }
        function showModal(type, title, text, info = null) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modal-title');
            const modalText = document.getElementById('modal-text');
            const modalInfo = document.getElementById('modal-info');
            const iconSvg = type === 'clue' 
                ? '<svg viewBox="0 0 24 24"><path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"/></svg>'
                : '<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/></svg>';
            modalTitle.innerHTML = `${iconSvg} ${title}`;
            modalTitle.className = `modal-title ${type}-title`;
            modalText.textContent = text;
            modalText.className = type === 'answer' && isRevealed ? 'modal-text answer-text' : 'modal-text';
            if (info && type === 'answer' && isRevealed) {
                modalInfo.textContent = info;
                modalInfo.style.display = 'block';
            } else {
                modalInfo.style.display = 'none';
            }
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        function closeModal() {
            const modal = document.getElementById('modal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        function isModalOpen() {
            const modal = document.getElementById('modal');
            return modal && modal.style.display === 'flex';
        }
        // Core slideshow functions
        function checkRevealDate() {
            const now = new Date();
            const revealDate = new Date(CONFIG.revealDateTime);
            isRevealed = now >= revealDate;
        }
        function createSlides(setId) {
            const setNumber = setId === 'set1' ? '1' : '2';
            const pictures = CONFIG.collections[setId].pictures;
            const slidesContainer = document.getElementById(`slides-container${setNumber}`);
            const dotsContainer = document.getElementById(`dots-container${setNumber}`);
            document.getElementById(`total-slides${setNumber}`).textContent = pictures.length;
            slidesContainer.innerHTML = '';
            dotsContainer.innerHTML = '';
            pictures.forEach((picture, index) => {
                const slide = document.createElement('div');
                slide.className = 'slide';
                const clueButtonHTML = picture.clue ? 
                    `<button class="clue-btn" onclick="showClue(${index})" title="Get a clue">
                        <svg viewBox="0 0 24 24">
                            <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"/>
                        </svg>
                    </button>` : '';
                slide.innerHTML = `
                    <div class="slide-image-container">
                        <img src="${CONFIG.githubBaseUrl}${picture.filename}" 
                             alt="Picture ${index + 1}" 
                             loading="lazy"
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlICR7aW5kZXggKyAxfTwvdGV4dD48L3N2Zz4='">
                    </div>
                    <div class="slide-bottom-section">
                        ${clueButtonHTML}
                        <button class="answer-btn" onclick="showAnswer(${index})">
                            <svg viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
                            </svg>
                            Show Answer
                        </button>
                    </div>
                `;
                slidesContainer.appendChild(slide);
                const dot = document.createElement('span');
                dot.className = `dot ${index === 0 ? 'active' : ''}`;
                dot.onclick = () => showSlide(index + 1);
                dotsContainer.appendChild(dot);
            });
        }
        function showSlide(n) {
            if (!activeSet) return;
            const setNumber = activeSet === 'set1' ? '1' : '2';
            const pictures = CONFIG.collections[activeSet].pictures;
            const slides = document.querySelectorAll(`#slides-container${setNumber} .slide`);
            const dots = document.querySelectorAll(`#dots-container${setNumber} .dot`);
            const slidesContainer = document.getElementById(`slides-container${setNumber}`);
            if (n > slides.length) currentSlide = 1;
            else if (n < 1) currentSlide = slides.length;
            else currentSlide = n;
            const translateX = -(currentSlide - 1) * 100;
            slidesContainer.style.transform = `translateX(${translateX}%)`;
            dots.forEach(dot => dot.classList.remove('active'));
            if (dots[currentSlide - 1]) {
                dots[currentSlide - 1].classList.add('active');
            }
            document.getElementById(`current-slide${setNumber}`).textContent = currentSlide;
            document.getElementById(`prevBtn${setNumber}`).disabled = currentSlide === 1;
            document.getElementById(`nextBtn${setNumber}`).disabled = currentSlide === slides.length;
        }
        function changeSlide(n) {
            if (isDragging || !activeSet) return;
            showSlide(currentSlide + n);
        }
        // Touch handling
        function handleTouchStart(e) {
            if (!activeSet) return;
            touchStartX = e.touches[0].clientX;
            touchEndX = touchStartX;
            isDragging = true;
            isSwiping = false;
        }
        function handleTouchMove(e) {
            if (!isDragging || !activeSet) return;
            e.preventDefault();
            touchEndX = e.touches[0].clientX;
            const dragDistance = touchEndX - touchStartX;
            const currentTranslate = -(currentSlide - 1) * 100;
            const dragPercent = (dragDistance / window.innerWidth) * 100;
            const newTranslate = currentTranslate + dragPercent;
            const setNumber = activeSet === 'set1' ? '1' : '2';
            const slidesContainer = document.getElementById(`slides-container${setNumber}`);
            slidesContainer.style.transition = 'none';
            slidesContainer.style.transform = `translateX(${newTranslate}%)`;
        }
        function handleTouchEnd(e) {
            if (!isDragging || !activeSet) return;
            isDragging = false;
            const setNumber = activeSet === 'set1' ? '1' : '2';
            const slidesContainer = document.getElementById(`slides-container${setNumber}`);
            slidesContainer.style.transition = 'transform 0.3s ease-out';
            const swipeDistance = touchStartX - touchEndX;
            const swipeThreshold = 50;
            if (Math.abs(swipeDistance) > swipeThreshold) {
                if (swipeDistance > 0 && currentSlide < CONFIG.collections[activeSet].pictures.length) {
                    currentSlide++;
                } else if (swipeDistance < 0 && currentSlide > 1) {
                    currentSlide--;
                }
            }
            showSlide(currentSlide);
            touchStartX = 0;
            touchEndX = 0;
        }
        function hideSwipeIndicator(setId) {
            const setNumber = setId === 'set1' ? '1' : '2';
            const indicator = document.getElementById(`swipeIndicator${setNumber}`);
            setTimeout(() => {
                if (indicator) {
                    indicator.style.opacity = '0';
                    setTimeout(() => {
                        indicator.style.display = 'none';
                    }, 1000);
                }
            }, 4000);
        }
        function initializeMenuButtons() {
            const menuButtons = document.querySelectorAll('.menu-btn');
            menuButtons.forEach((button, index) => {
                if (index < 2) {
                    const setKey = index === 0 ? 'set1' : 'set2';
                    button.textContent = CONFIG.collections[setKey].buttonText;
                }
            });
            document.querySelector('#slideshow-set1 .slideshow-title').textContent = CONFIG.collections.set1.title;
            document.querySelector('#slideshow-set2 .slideshow-title').textContent = CONFIG.collections.set2.title;
            initializeInstructionPages();
        }
        function initializeInstructionPages() {
            Object.keys(CONFIG.instructions).forEach(setKey => {
                const instructionData = CONFIG.instructions[setKey];
                const instructionPage = document.getElementById(`instructions-${setKey}`);
                if (instructionPage && instructionData) {
                    const titleEl = instructionPage.querySelector('.instructions-title');
                    if (titleEl) titleEl.textContent = instructionData.title;
                    const contentEl = instructionPage.querySelector('.instructions-content');
                    if (contentEl && instructionData.content) {
                        let htmlContent = '';
                        Object.keys(instructionData.content).forEach(sectionKey => {
                            const sectionTitle = sectionKey.replace(/([A-Z])/g, ' $1')
                                .replace(/^./, str => str.toUpperCase());
                            htmlContent += `<h3>${sectionTitle}:</h3><ul>`;
                            instructionData.content[sectionKey].forEach(item => {
                                htmlContent += `<li>${item}</li>`;
                            });
                            htmlContent += '</ul>';
                        });
                        contentEl.innerHTML = htmlContent;
                    }
                }
            });
        }
        // Event listeners
        document.addEventListener('keydown', (e) => {
            if (isModalOpen()) {
                if (e.key === 'Escape') {
                    closeModal();
                }
                return;
            }
            if (activeSet) {
                if (e.key === 'ArrowLeft') changeSlide(-1);
                if (e.key === 'ArrowRight') changeSlide(1);
            }
            if (e.key === 'Escape') {
                if (activeSet) showMainMenu();
            }
        });
        document.addEventListener('touchstart', (e) => {
            if (!isModalOpen()) {
                handleTouchStart(e);
            }
        }, { passive: true });
        document.addEventListener('touchmove', (e) => {
            if (!isModalOpen()) {
                handleTouchMove(e);
            }
        }, { passive: false });
        document.addEventListener('touchend', (e) => {
            if (!isModalOpen()) {
                handleTouchEnd(e);
            }
        }, { passive: true });
        document.addEventListener('contextmenu', (e) => {
            if (e.target.tagName === 'IMG') {
                e.preventDefault();
            }
        });
        document.getElementById('modal').addEventListener('touchstart', (e) => {
            e.stopPropagation();
        }, { passive: true });
        document.getElementById('modal').addEventListener('touchmove', (e) => {
            e.preventDefault();
            e.stopPropagation();
        }, { passive: false });
        document.getElementById('modal').addEventListener('touchend', (e) => {
            e.stopPropagation();
        }, { passive: true });
        // Initialize
        checkRevealDate();
        initializeMenuButtons();
        showMainMenu();
        setInterval(() => {
            checkRevealDate();
        }, 60000);
    </script>
</body>
</html>





